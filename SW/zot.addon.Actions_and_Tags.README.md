![Actions and Tags for Zotero](https://github.com/windingwind/zotero-actions-tags/raw/master/addon/chrome/content/icons/favicon.png)
online README: [zotero-actions-tags/README.md at master ¬∑ windingwind/zotero-actions-tags (github.com)](https://github.com/windingwind/zotero-actions-tags/blob/master/README.md)

[![zotero target version](https://camo.githubusercontent.com/f93d38d0d3a5ed21bee03d0fd91e6332fc12b806adacb0e5b42ab108a657de9f/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f5a6f7465726f2d372d677265656e3f7374796c653d666c61742d737175617265266c6f676f3d7a6f7465726f266c6f676f436f6c6f723d434332393336)](https://www.zotero.org/)¬†[![Using Zotero Plugin Template](https://camo.githubusercontent.com/51d70ff4f12793292e09fd8645aa636415f69c659d236a021f3e8df0a2c7ea69/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f5573696e672d5a6f7465726f253230506c7567696e25323054656d706c6174652d626c75653f7374796c653d666c61742d737175617265266c6f676f3d676974687562)](https://github.com/windingwind/zotero-plugin-template)


_Action it, tag it, sorted._

[![image](https://private-user-images.githubusercontent.com/33902321/267937377-05aa4dc2-4782-4ddf-84ea-949de96820a7.png?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3MDUxMjY4MjMsIm5iZiI6MTcwNTEyNjUyMywicGF0aCI6Ii8zMzkwMjMyMS8yNjc5MzczNzctMDVhYTRkYzItNDc4Mi00ZGRmLTg0ZWEtOTQ5ZGU5NjgyMGE3LnBuZz9YLUFtei1BbGdvcml0aG09QVdTNC1ITUFDLVNIQTI1NiZYLUFtei1DcmVkZW50aWFsPUFLSUFWQ09EWUxTQTUzUFFLNFpBJTJGMjAyNDAxMTMlMkZ1cy1lYXN0LTElMkZzMyUyRmF3czRfcmVxdWVzdCZYLUFtei1EYXRlPTIwMjQwMTEzVDA2MTUyM1omWC1BbXotRXhwaXJlcz0zMDAmWC1BbXotU2lnbmF0dXJlPTAzYjExOGFmNmI5ODdkNjllYWY1ODY0NjNmMTAwN2RlZDljYWNjODliNTVkOTk0YzMyZTFkZTgyYTQ3Mjg3MDkmWC1BbXotU2lnbmVkSGVhZGVycz1ob3N0JmFjdG9yX2lkPTAma2V5X2lkPTAmcmVwb19pZD0wIn0.wWAnKCjCaELj56igTIi3OJT-QqbinQ4ATjUOy2hgjdI)](https://private-user-images.githubusercontent.com/33902321/267937377-05aa4dc2-4782-4ddf-84ea-949de96820a7.png?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3MDUxMjY4MjMsIm5iZiI6MTcwNTEyNjUyMywicGF0aCI6Ii8zMzkwMjMyMS8yNjc5MzczNzctMDVhYTRkYzItNDc4Mi00ZGRmLTg0ZWEtOTQ5ZGU5NjgyMGE3LnBuZz9YLUFtei1BbGdvcml0aG09QVdTNC1ITUFDLVNIQTI1NiZYLUFtei1DcmVkZW50aWFsPUFLSUFWQ09EWUxTQTUzUFFLNFpBJTJGMjAyNDAxMTMlMkZ1cy1lYXN0LTElMkZzMyUyRmF3czRfcmVxdWVzdCZYLUFtei1EYXRlPTIwMjQwMTEzVDA2MTUyM1omWC1BbXotRXhwaXJlcz0zMDAmWC1BbXotU2lnbmF0dXJlPTAzYjExOGFmNmI5ODdkNjllYWY1ODY0NjNmMTAwN2RlZDljYWNjODliNTVkOTk0YzMyZTFkZTgyYTQ3Mjg3MDkmWC1BbXotU2lnbmVkSGVhZGVycz1ob3N0JmFjdG9yX2lkPTAma2V5X2lkPTAmcmVwb19pZD0wIn0.wWAnKCjCaELj56igTIi3OJT-QqbinQ4ATjUOy2hgjdI)
## üßê What is this?

_Actions & Tags_¬†(AT), also known as¬†_Zotero Tag_, is a plugin for¬†[Zotero](https://zotero.org/).

AT can help you:

- Automatically tag items with our¬†[actions](https://github.com/windingwind/zotero-actions-tags/blob/master), triggered by Zotero events or user-defined shortcuts
- Automate your workflow with custom scripts!
    - [Replace tag](https://github.com/windingwind/zotero-actions-tags/discussions/113)
    - [Copy item link](https://github.com/windingwind/zotero-actions-tags/discussions/115)
    - [Auto-generate note when opening item](https://github.com/windingwind/zotero-actions-tags/discussions/108)
    - [Auto-translate new items' title/abstract](https://github.com/windingwind/zotero-actions-tags/discussions/107)
    - [Find out more ‚Üí](https://github.com/windingwind/zotero-actions-tags/discussions/categories/action-scripts)
### Create your <u>Own Actions</u>

Now that you have learned how to use the example, you can create your own actions!

Steps to open the list of actions:

- Open the settings (aka. preferences) page of this plugin. See [Zotero Doc:preferences](https://www.zotero.org/support/preferences) for more details.
- Click the "Actions & Tags" tab.

Now you can see a list of actions.

The community contributed some useful actions via `custom script`. Take an example of `copy item link`, You can use it by:

1. Create an action by clicking the "+" button. Set the operation to `customScript`, assign `shortcut` and `menu label`.

<img width="300" alt="image" src="https://github.com/windingwind/zotero-actions-tags/assets/33902321/9c327c8a-46d0-416c-b21a-95d4d021c9ea">

2. Copy the script from community: [[Share] Copy item link of the selected item](https://github.com/windingwind/zotero-actions-tags/discussions/115) -> data.

<img width="400" alt="image" src="https://github.com/windingwind/zotero-actions-tags/assets/33902321/fad3449a-13ac-4b13-bb19-efe537c4579d">

3. Paste the script to the `data` field of the action.

4. Click "Save" to save the action.

Great! Now you can use the action by:

- Right click the item in the library and select the action in the menu -> trigger action -> Copy item link.

- Use the shortcut you assigned to the action.

Check your clipboard and you will find the link of the item!

You can find more actions by searching [community](https://github.com/windingwind/zotero-actions-tags/discussions/categories/action-scripts).

### Action settings

An action has the following settings:

- **Event**: The event that triggers the action.


<u>supported events</u>

| Event              | Description                                               |
| ------------------ | --------------------------------------------------------- |
| `createItem`       | Triggered when an item is created.                        |
| `openFile`         | Triggered when an item is opened.                         |
| `closeTab`         | Triggered when an item is closed.                         |
| `createAnnotation` | Triggered when an annotation is created.                  |
| `createNote`       | Triggered when a note is created.                         |
| `appendAnnotation` | Triggered when an annotation is appended to target item.  |
| `appendNote`       | Triggered when a note is appended to target item.         |
| `programStartup`   | Triggered when the Zotero client (or this plugin) starts. |
| `mainWindowLoad`   | Triggered when the main window is loaded.                 |
| `mainWindowUnload` | Triggered when the main window is unloaded (closed).      |

- **Operation**: The operation that the action will perform.


<u>supported operations</u>

| Operation      | Description                                                                    |
| -------------- | ------------------------------------------------------------------------------ |
| `addTag`       | Add tag(s) to the target item.                                                 |
| `removeTag`    | Remove tag(s) from the target item.                                            |
| `toggleTag`    | Add tag(s) to the target item if it doesn't have the tag, otherwise remove it. |
| `customScript` | Run a custom script.                                                           |


- **Data**: The action data. For tag operations, it's tags separated by comma. For custom script, it's the script code.

  > Click `‚§§` in the edit action popup to open editor for multi-line data.

- **Shortcut**: The shortcut that triggers the action. Leave it empty if you don't want to use a shortcut.

  > Click shortcut button in the edit action popup to record custom shortcut from keyboard.

- **Menu Label**: The label of the menu item to be displayed in the right-click menu in the library / reader popup menu.

  > Leave empty to hide in the menu.
  > Sort by the menu label alphabetically.

  - Item Menu  
    <img width="300" alt="image" src="https://github.com/windingwind/zotero-actions-tags/assets/33902321/c0b45172-82ec-450d-b578-0aeb2c33e7ea">
  - Collection Menu  
    <img width="300" alt="image" src="https://github.com/windingwind/zotero-actions-tags/assets/33902321/90e8f705-8d51-4485-81d9-af927e850200">
  - Tools Menu
  - Reader Menu  
    <img width="300" alt="image" src="https://github.com/windingwind/zotero-actions-tags/assets/33902321/d7ccbb74-5344-4604-aa84-36f624761c00">
  - Annotation Menu  
    <img width="300" alt="image" src="https://github.com/windingwind/zotero-actions-tags/assets/33902321/d1fa0cb9-4f40-46f7-bf75-9c1b19830955">

- **Enabled**: Whether the action is enabled. Uncheck it to disable the action.

## üîç Advanced usage

### Colorize your tags

You can colorize your tags by assigning a color to the tag in the tag selector. See [Zotero Doc:colored tags](https://www.zotero.org/support/collections_and_tags#colored_tags) for more details.

Use cases:

- Assign a color to the `/unread` tag so that you can easily find the unread items in your library.
- Assign colors to the `‚≠êÔ∏è`, `‚≠êÔ∏è‚≠êÔ∏è`, `‚≠êÔ∏è‚≠êÔ∏è‚≠êÔ∏è`, ... tags so that you can easily sort the items by their importance.

### Custom script

> ‚ö†Ô∏è **Warning**: Custom script is a powerful feature. It can do anything that you can do in the Zotero client. Use it with caution!
>
> All the scripts shared in the [community](https://github.com/windingwind/zotero-actions-tags/discussions/categories/action-scripts) will be manually reviewed by me to make sure it is not malicious. However, they may still cause data loss if you does not use them properly!
> Do not run the script that you do not trust!

You can run custom script with the `customScript` operation. The script will be executed in the context of the Zotero client.

Share & find custom scripts here: https://github.com/windingwind/zotero-actions-tags/discussions/categories/action-scripts

You can use the following variables in the script:

- `item`: The target item. Might be `null` if the action is triggered by an event that doesn't have a target item, e.g. shortcut in the Zotero client without selecting an item. (Not available in `programStartup`, `mainWindowLoad`, and `mainWindowUnload` event)

  <details style="text-indent: 4em">
  <summary>Examples with `item`</summary>

  - Get the title of the item: `item.getField('title')`. More details of the available fields can be found in [Zotero:item fields](https://api.zotero.org/itemFields?pprint=1)
  - Get the tags of the item: `item.getTags().map(tag => tag.tag)`
  - Add a tag to the item: `item.addTag('tag')`
  - Remove a tag from the item: `item.removeTag('tag')`

  </details>

- `items`: The target items[] array. Only available in menu/shortcut-triggered actions, otherwise it's `null`.

  When selecting multiple items in the library, the action will be triggered once for all item (`items=[...], item=undefined`) and then one-by-one for each item (`items=[], item=...`). You can use the `items` variable to get the selected items array and avoid duplicate executions.

  <details style="text-indent: 4em">
  <summary>Examples with `items`</summary>

  ```js
  if (!items && item) {
    // Disable the action if it's triggered for a single item to avoid duplicate operations
    return;
  }

  if (items?.length > 0) {
    // Do something with the selected items
  }
  ```

  </details>

- `collection`: The target collection object, only available when triggered by collection menu.

- `require`: The `require` function to import global variables. Use `const window = require('window')` to import the `window` variable.

  <details style="text-indent: 4em">
  <summary>Examples with `require`</summary>

  - Get selected items: `const selectedItems = require('ZoteroPane').getSelectedItems()`
  - Get the item of current tab:

    ```js
    const Zotero = require("Zotero");
    const Zotero_Tab = require("Zotero_Tab");
    const itemID = Zotero_Tabs._tabs[Zotero_Tabs.selectedIndex].data.itemID;
    const item = Zotero.Items.get(itemID);
    ```

  </details>

- `window`: Only available in `mainWindowLoad` and `mainWindowUnload` event. In other events, you should use `require('Zotero').getMainWindow()` to import the `window` variable.

## üîß Development

This plugin is built based on the [Zotero Plugin Template](https://github.com/windingwind/zotero-plugin-template). See the setup and debug details there.

To startup, run

```bash
git clone https://github.com/windingwind/zotero-actions-tags.git
cd zotero-actions-tags
npm install
npm run build
```

The plugin is built to `./build/*.xpi`.

## üîî Disclaimer

Use this code under AGPL. No warranties are provided. Keep the laws of your locality in mind!

## üîé My Zotero Plugins

- [Preview for Zotero](https://github.com/windingwind/zotero-pdf-preview): PDF preview for Zotero
- [Better Notes for Zotero](https://github.com/windingwind/zotero-better-notes): Everything about note management. All in Zotero.
- [Translate for Zotero](https://github.com/windingwind/zotero-pdf-translate/): Translate PDF, EPub, webpage, metadata, annotations, notes to the target language. Support 20+ translate services.

## üí∞ Sponsor Me

I'm windingwind, an active Zotero(https://www.zotero.org) plugin developer. Devoting to making reading papers easier.

Sponsor me to buy a cup of coffee. I spend more than 24 hours every week coding, debugging, and replying to issues in my plugin repositories. The plugins are open-source and totally free.

If you sponsor more than $10 a month, you can list your name/logo here and have priority for feature requests/bug fixes!

## üôå Sponsors

Thanks
[peachgirl100](https://github.com/peachgirl100), [Juan Gimenez](),
and other anonymous sponsors!

If you want to leave your name here, please email me or leave a message with the donation.
___
from: zot.addon.Actions_and_Tags on: 2024-01-13 08:01:16